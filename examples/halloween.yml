################################################################################
# Configuration for running all of my Halloween props.

# General configuration options:
config:
  device: /dev/ttyUSB0

# Node name to address table:
nodes:
  - name: outlet
    addr: 00:13:a2:00:40:e6:e9:60

  - name: picofx
    addr: 00:13:a2:00:40:d8:71:0d

  - name: irbeam
    addr: 00:13:a2:00:40:d8:71:3b

  - name: air
    addr: 00:13:a2:00:40:d8:71:0f

# Commands that can be sent to nodes:
commands:
  - name: Lights On
    node: outlet
    type: AT
    code: D3
    payload: "5"

  - name: Lights Off
    node: outlet
    type: AT
    code: D3
    payload: "4"

  - name: Speakers On
    node: outlet
    type: AT
    code: D4
    payload: "5"

  - name: Speakers Off
    node: outlet
    type: AT
    code: D4
    payload: "4"

  - name: Music
    node: picofx
    type: AT
    code: D4
    payload: "4"

  - name: Storm
    node: picofx
    type: AT
    code: D4
    payload: "5"

  - name: Air On
    node: air
    type: AT
    code: D4
    payload: "5"

  - name: Air Off
    node: air
    type: AT
    code: D4
    payload: "4"

# Event handlers:
events:
  - when: Node Identification
    node: outlet
    actions:
      - send Lights On
      - send Speakers On

  - when: Node Identification
    node: picofx
    actions:
      - send Music

  - when: Node Identification
    node: air
    actions:
      - send Air On
      - wait 500
      - send Air Off

  - when: Digital Sample
    with: D0 Low
    node: irbeam
    actions:
      - skip muted
      - mute 40000
      - send Lights Off
      - wait 650
      - send Air On
      - wait 500
      - send Air Off
      - send Storm
      - wait 16000
      # use z-wave command for black lights
      - wait 13000
      - send Music
      # use z-wave command for black lights
      - send Lights On
